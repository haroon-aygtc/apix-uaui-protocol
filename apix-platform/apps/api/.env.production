# =============================================================================
# APIX PLATFORM - PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# SECURITY WARNING: Update all secrets and passwords before production deployment!

# Application Environment
NODE_ENV=production
PORT=3001

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PRODUCTION: Use your production database URL
DATABASE_URL=postgresql://username:password@production-db-host:5432/apix_production_db

# =============================================================================
# REDIS CONFIGURATION (Session & Caching)
# =============================================================================
# PRODUCTION: Use your production Redis instance
REDIS_HOST=production-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=your-production-redis-password
REDIS_DB=0

# =============================================================================
# JWT AUTHENTICATION CONFIGURATION
# =============================================================================
# SECURITY CRITICAL: Generate strong, unique secrets for production!
JWT_SECRET=CHANGE-THIS-TO-A-STRONG-256-BIT-SECRET-IN-PRODUCTION
JWT_EXPIRES_IN=24h
JWT_ALGORITHM=HS256
JWT_ISSUER=apix-platform
JWT_AUDIENCE=apix-clients

# Refresh Token Configuration
JWT_REFRESH_SECRET=CHANGE-THIS-TO-A-DIFFERENT-STRONG-SECRET-IN-PRODUCTION
JWT_REFRESH_EXPIRES_IN=7d

# =============================================================================
# PASSWORD SECURITY CONFIGURATION
# =============================================================================
BCRYPT_SALT_ROUNDS=12

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
SESSION_MAX_AGE=86400000
SESSION_SECURE=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=strict

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
# Authentication Rate Limiting (Stricter in production)
AUTH_RATE_LIMIT_WINDOW=900000
AUTH_RATE_LIMIT_MAX=3

# General API Rate Limiting
RATE_LIMIT_MAX=50
RATE_LIMIT_WINDOW=60000

# Tenant-specific Rate Limiting
TENANT_RATE_LIMIT=true
TENANT_RATE_WINDOW=60000
TENANT_RATE_MAX_REQUESTS=50
TENANT_RATE_SKIP_SUCCESS=false
TENANT_RATE_PER_USER=true
TENANT_RATE_PER_ENDPOINT=true

# =============================================================================
# TENANT ISOLATION & SECURITY
# =============================================================================
TENANT_CROSS_VALIDATION=true
TENANT_OWNERSHIP_CHECK=true
TENANT_PERMISSION_CACHE=true
TENANT_PERMISSION_CACHE_TTL=300
TENANT_SECURITY_ALERTS=true
TENANT_MAX_FAILED_ATTEMPTS=3
TENANT_LOCKOUT_DURATION=1800

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================
WS_RATE_LIMIT_WINDOW=60000
WS_RATE_LIMIT_MAX=50
WS_MAX_SUBSCRIPTIONS=25
WS_CHANNEL_TTL=3600000
WS_RETRY_MAX_ATTEMPTS=3
WS_RETRY_BACKOFF_MULTIPLIER=2
WS_RETRY_INITIAL_DELAY=1000
WS_RETRY_MAX_DELAY=30000

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# PRODUCTION: Set to your actual frontend domain
CORS_ORIGIN=https://your-production-domain.com

# =============================================================================
# AUDIT & LOGGING CONFIGURATION
# =============================================================================
AUDIT_ENABLE_DATABASE_STORAGE=true
AUDIT_ENABLE_REAL_TIME_ALERTS=true
AUDIT_RETENTION_DAYS=365
AUDIT_ENABLE_COMPLIANCE_REPORTS=true

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_RBAC=true
ENABLE_MULTI_TENANT=true
ENABLE_AUDIT_LOGGING=true
ENABLE_RATE_LIMITING=true
ENABLE_WEBSOCKET_SECURITY=true

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# NEW_RELIC_LICENSE_KEY=your-new-relic-license-key
# DATADOG_API_KEY=your-datadog-api-key

# =============================================================================
# SSL/TLS CONFIGURATION (If using HTTPS)
# =============================================================================
# SSL_CERT_PATH=/path/to/ssl/certificate.crt
# SSL_KEY_PATH=/path/to/ssl/private.key
